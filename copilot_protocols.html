<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>4&nbsp; Mandatory Protocols for Using GitHub Copilot in Technical Work – Pip Technical Guidelines</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./copilot_guidelines.html" rel="next">
<link href="./VScode_setup_for_github.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-0dd2bd5de344125cf763a379ddc3eb04.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://hypothes.is/embed.js"></script>
<script>
  window.document.addEventListener("DOMContentLoaded", function (_event) {
    document.body.classList.add('hypothesis-enabled');
  });
</script>


<link rel="stylesheet" href="css/tachyons.css">
</head>

<body class="nav-sidebar floating quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./copilot_protocols.html">Copilot and AI Tools</a></li><li class="breadcrumb-item"><a href="./copilot_protocols.html"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Mandatory Protocols for Using GitHub Copilot in Technical Work</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Pip Technical Guidelines</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">R Setup and efficiency</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./setupR.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Setting Up R, RStudio, and Positron to Use the Same Configuration Files</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">VSCode Setup</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./VScode_Setup_for_stata.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">SetUp Vscode to work with Stata</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./VScode_setup_for_github.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">SetUp Git &amp; GitHub in VS Code</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Copilot and AI Tools</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./copilot_protocols.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Mandatory Protocols for Using GitHub Copilot in Technical Work</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./copilot_guidelines.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Suggested Guidelines for Using GitHub Copilot in Technical Work</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">MISC Tools and Tips</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./code_coverage.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Add code coverage badge to your GitHub Repository.</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./github_actions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Setting up Github Actions for Auto Deployment of Quarto book</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Increase_performance_WB_laptop.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Improve Efficiency of a WB Laptop</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./interact_vm.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">How to interact with the Virtual Machine (VM) that hosts PIP</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#purpose-and-principles" id="toc-purpose-and-principles" class="nav-link active" data-scroll-target="#purpose-and-principles">Purpose and Principles</a></li>
  <li><a href="#protocol-1-documenting-your-work-with-copilot" id="toc-protocol-1-documenting-your-work-with-copilot" class="nav-link" data-scroll-target="#protocol-1-documenting-your-work-with-copilot">Protocol 1 — Documenting Your Work With Copilot</a>
  <ul class="collapse">
  <li><a href="#start-every-copilot-assisted-task-with-a-quick-declaration" id="toc-start-every-copilot-assisted-task-with-a-quick-declaration" class="nav-link" data-scroll-target="#start-every-copilot-assisted-task-with-a-quick-declaration">Start Every Copilot-Assisted Task With a Quick Declaration</a></li>
  <li><a href="#keep-the-summary-updated-as-you-go-but-keep-it-light" id="toc-keep-the-summary-updated-as-you-go-but-keep-it-light" class="nav-link" data-scroll-target="#keep-the-summary-updated-as-you-go-but-keep-it-light">Keep the Summary Updated as You Go (But Keep It Light)</a></li>
  <li><a href="#when-you-finish-ask-copilot-for-a-clean-markdown-summary" id="toc-when-you-finish-ask-copilot-for-a-clean-markdown-summary" class="nav-link" data-scroll-target="#when-you-finish-ask-copilot-for-a-clean-markdown-summary">When You Finish, Ask Copilot for a Clean Markdown Summary</a></li>
  </ul></li>
  <li><a href="#protocol-2-making-the-code-understandable" id="toc-protocol-2-making-the-code-understandable" class="nav-link" data-scroll-target="#protocol-2-making-the-code-understandable">Protocol 2 — Making the Code Understandable</a>
  <ul class="collapse">
  <li><a href="#ask-copilot-to-explain-the-code-step-by-step" id="toc-ask-copilot-to-explain-the-code-step-by-step" class="nav-link" data-scroll-target="#ask-copilot-to-explain-the-code-step-by-step">Ask Copilot to Explain the Code Step-by-Step</a></li>
  <li><a href="#ask-copilot-to-add-in-code-comments-explaining-both-the-what-and-the-why" id="toc-ask-copilot-to-add-in-code-comments-explaining-both-the-what-and-the-why" class="nav-link" data-scroll-target="#ask-copilot-to-add-in-code-comments-explaining-both-the-what-and-the-why">Ask Copilot to Add In-Code Comments Explaining Both the “What” and the “Why”</a></li>
  <li><a href="#ask-copilot-to-document-all-r-functions-using-roxygen2" id="toc-ask-copilot-to-document-all-r-functions-using-roxygen2" class="nav-link" data-scroll-target="#ask-copilot-to-document-all-r-functions-using-roxygen2">Ask Copilot to Document All R Functions Using Roxygen2</a></li>
  <li><a href="#ask-copilot-to-provide-a-plain-language-overview-of-the-logic" id="toc-ask-copilot-to-provide-a-plain-language-overview-of-the-logic" class="nav-link" data-scroll-target="#ask-copilot-to-provide-a-plain-language-overview-of-the-logic">Ask Copilot to Provide a Plain-Language Overview of the Logic</a></li>
  </ul></li>
  <li><a href="#protocol-3-testing-and-edge-cases" id="toc-protocol-3-testing-and-edge-cases" class="nav-link" data-scroll-target="#protocol-3-testing-and-edge-cases">Protocol 3 — Testing and Edge Cases</a>
  <ul class="collapse">
  <li><a href="#ask-copilot-to-build-a-validation-checklist" id="toc-ask-copilot-to-build-a-validation-checklist" class="nav-link" data-scroll-target="#ask-copilot-to-build-a-validation-checklist">Ask Copilot to Build a Validation Checklist</a></li>
  <li><a href="#ask-copilot-to-generate-unit-tests-and-edge-cases" id="toc-ask-copilot-to-generate-unit-tests-and-edge-cases" class="nav-link" data-scroll-target="#ask-copilot-to-generate-unit-tests-and-edge-cases">Ask Copilot to Generate Unit Tests and Edge Cases</a></li>
  <li><a href="#optional-but-recommended-ask-copilot-to-suggest-performance-sensitive-tests" id="toc-optional-but-recommended-ask-copilot-to-suggest-performance-sensitive-tests" class="nav-link" data-scroll-target="#optional-but-recommended-ask-copilot-to-suggest-performance-sensitive-tests">(Optional but Recommended) Ask Copilot to Suggest Performance-Sensitive Tests</a></li>
  </ul></li>
  <li><a href="#protocol-4-dependencies-risks-and-final-validation-bundle" id="toc-protocol-4-dependencies-risks-and-final-validation-bundle" class="nav-link" data-scroll-target="#protocol-4-dependencies-risks-and-final-validation-bundle">Protocol 4 — Dependencies, Risks, and Final Validation Bundle</a>
  <ul class="collapse">
  <li><a href="#ask-copilot-to-run-a-dependency-and-risk-scan" id="toc-ask-copilot-to-run-a-dependency-and-risk-scan" class="nav-link" data-scroll-target="#ask-copilot-to-run-a-dependency-and-risk-scan">Ask Copilot to Run a Dependency and Risk Scan</a></li>
  <li><a href="#ask-copilot-to-critique-its-own-code" id="toc-ask-copilot-to-critique-its-own-code" class="nav-link" data-scroll-target="#ask-copilot-to-critique-its-own-code">Ask Copilot to Critique Its Own Code</a></li>
  <li><a href="#package-everything-into-a-validation-bundle" id="toc-package-everything-into-a-validation-bundle" class="nav-link" data-scroll-target="#package-everything-into-a-validation-bundle">Package Everything Into a “Validation Bundle”</a></li>
  <li><a href="#why-these-protocols-matter" id="toc-why-these-protocols-matter" class="nav-link" data-scroll-target="#why-these-protocols-matter">Why These Protocols Matter</a></li>
  <li><a href="#extra-prompt-files-are-optional-tools-not-documentation" id="toc-extra-prompt-files-are-optional-tools-not-documentation" class="nav-link" data-scroll-target="#extra-prompt-files-are-optional-tools-not-documentation">(EXTRA) Prompt Files Are Optional Tools, Not Documentation</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./copilot_protocols.html">Copilot and AI Tools</a></li><li class="breadcrumb-item"><a href="./copilot_protocols.html"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Mandatory Protocols for Using GitHub Copilot in Technical Work</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Mandatory Protocols for Using GitHub Copilot in Technical Work</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  
<div>
  <div class="abstract">
    <div class="block-title">Abstract</div>
    this document outlines mandatory protocols and recommended guidelines for using GitHub Copilot in technical work, ensuring productivity while maintaining code quality and team skills.
  </div>
</div>


</header>


<section id="purpose-and-principles" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="purpose-and-principles">Purpose and Principles</h2>
<p>GitHub Copilot is a powerful assistant that can increase productivity, generate boilerplate code quickly, and support experimentation. However, Copilot is not a substitute for engineering judgment, critical thinking, or expertise in R/Stata. This document establishes <strong>Protocols</strong> (mandatory actions) that must be followed and demonstrated during reviews.</p>
<p>These protocols have been drafted with the following principles in mind:</p>
<ol type="1">
<li>Improve productivity.</li>
<li>Ensure robustness, maintainability, and security of code.</li>
<li>Strengthen—not replace—team members’ coding skills.</li>
<li>Prevent dependency creep, hallucinations, inefficiencies, and silent errors.</li>
</ol>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>Every team member <strong>must</strong> follow these protocols when using Copilot for technical work. Team leads will verify compliance during code reviews.</p>
</div>
</div>
<hr>
</section>
<section id="protocol-1-documenting-your-work-with-copilot" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="protocol-1-documenting-your-work-with-copilot">Protocol 1 — Documenting Your Work With Copilot</h2>
<p><strong>Objective:</strong> We want every piece of Copilot-assisted work to be transparent, easy to review, and easy to understand—not only for you, but for anyone who touches the code later. Think of this as keeping a clear trail of “why we did what we did,” without drowning anyone in hundreds of lines of chat history.</p>
<section id="start-every-copilot-assisted-task-with-a-quick-declaration" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="start-every-copilot-assisted-task-with-a-quick-declaration">Start Every Copilot-Assisted Task With a Quick Declaration</h3>
<p>Whenever you’re about to use Copilot for a particular task (especially the ones formally assigned to you), like rewriting a function, adding a feature, building tests, or refactoring, let Copilot know you’re starting a task.</p>
<p>You can use this short message (literally copy and paste; just change the <code>TASK_NAME</code>):</p>
<div class="callout callout-style-simple callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Prompt
</div>
</div>
<div class="callout-body-container callout-body">
<p>I’m starting Task: <code>TASK_NAME</code>.<br>
Please keep a concise running summary of our interaction, including:</p>
<ul>
<li>the major prompts I give<br>
</li>
<li>the important decisions we make<br>
</li>
<li>any dependencies added or removed<br>
</li>
<li>assumptions or limitations we identify</li>
</ul>
<p>At the end I’ll ask you to produce a markdown summary.</p>
</div>
</div>
<p>Why do this? Because Copilot won’t track your whole conversation. This little habit guarantees that your final summary is clean and complete.</p>
<hr>
</section>
<section id="keep-the-summary-updated-as-you-go-but-keep-it-light" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="keep-the-summary-updated-as-you-go-but-keep-it-light">Keep the Summary Updated as You Go (But Keep It Light)</h3>
<p>As you work, Copilot may try several ideas, produce alternatives, or suggest changes. When something important happens, simply say things like:</p>
<ul>
<li>“Add this to the summary: we switched to <code>data.table</code> for speed.”<br>
</li>
<li>“Add this: the first approach was rejected because it created too many dependencies.”<br>
</li>
<li>“Record that we decided to remove <code>purrr</code> and use <code>collapse</code> instead.”</li>
</ul>
<p>You don’t need to log every micro-step—just the meaningful ones.</p>
<p>This keeps your future self (and your teammates) very happy.</p>
<hr>
</section>
<section id="when-you-finish-ask-copilot-for-a-clean-markdown-summary" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="when-you-finish-ask-copilot-for-a-clean-markdown-summary">When You Finish, Ask Copilot for a Clean Markdown Summary</h3>
<p>Once the task is done, ask Copilot:</p>
<div class="callout callout-style-simple callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Prompt
</div>
</div>
<div class="callout-body-container callout-body">
<p>Now generate a markdown summary of this task, including:</p>
<ul>
<li>what the task was about<br>
</li>
<li>the key prompts I used<br>
</li>
<li>the major decisions or explanations you gave<br>
</li>
<li>dependencies that were added, removed, or questioned<br>
</li>
<li>any limitations or follow-up steps<br>
</li>
<li>the final version of the function or script<br>
</li>
<li>a short checklist showing how I followed the protocol</li>
</ul>
<p>Save the file under <code>copilot_logs/TASK_NAME.md</code></p>
</div>
</div>
<div class="callout-danger">
<p>If you’re working in an R package, make sure to include the <code>copilot_logs</code> folder in your <code>.Rbuildignore</code> file to prevent it from being included in the package build. You can do it by executing <code>usethis::use_build_ignore("copilot_logs")</code> or by manually adding the line <code>^copilot_logs/$</code> to the <code>.Rbuildignore</code> file.</p>
</div>
<p>Now, make sure to include it in your Pull Request.</p>
<p>This takes Copilot a few seconds and keeps our PRs tidy, transparent, and genuinely <em>reviewable</em>.</p>
</section>
</section>
<section id="protocol-2-making-the-code-understandable" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="protocol-2-making-the-code-understandable">Protocol 2 — Making the Code Understandable</h2>
<p><strong>Objective:</strong> Once Copilot produces code, we need to ensure that it is understandable; not just to you, but to any teammate who might maintain it later. This protocol focuses on explanations, comments, and documentation, so the logic and intent of the code are always clear.</p>
<p>Our goal here is simple: <strong>If Copilot wrote something, then Copilot should also help us understand it, both inside and outside the code.</strong></p>
<section id="ask-copilot-to-explain-the-code-step-by-step" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="ask-copilot-to-explain-the-code-step-by-step">Ask Copilot to Explain the Code Step-by-Step</h3>
<p>Right after Copilot generates a function, script, or refactor, ask:</p>
<div class="callout callout-style-simple callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Prompt
</div>
</div>
<div class="callout-body-container callout-body">
<p>Explain this code step-by-step. Describe the purpose of each major block. List all assumptions you’re making. Identify any cases where this code might break.</p>
</div>
</div>
<p>You’re not expected to decipher the code alone. This step forces Copilot to surface the hidden logic behind its decisions, and gives you a clear foundation for understanding what’s going on.</p>
<p>Include this explanation in your task summary.</p>
<hr>
</section>
<section id="ask-copilot-to-add-in-code-comments-explaining-both-the-what-and-the-why" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="ask-copilot-to-add-in-code-comments-explaining-both-the-what-and-the-why">Ask Copilot to Add In-Code Comments Explaining Both the “What” and the “Why”</h3>
<p>Once the general explanation is clear, you must ask Copilot:</p>
<div class="callout callout-style-simple callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Prompt
</div>
</div>
<div class="callout-body-container callout-body">
<p>Add clear comments directly inside the code. Explain:</p>
<ul>
<li>what each major block does</li>
<li>why this approach is being used</li>
<li>why this logic or pattern is appropriate here</li>
</ul>
</div>
</div>
<p>These comments are essential because:</p>
<ul>
<li>They ensure the logic is transparent.</li>
<li>They help future maintainers (including you).</li>
<li>They reduce the cognitive load when reviewing complex Copilot output.</li>
</ul>
<p>We want readable, human-language explanations—not machine translations of the code.</p>
<hr>
</section>
<section id="ask-copilot-to-document-all-r-functions-using-roxygen2" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="ask-copilot-to-document-all-r-functions-using-roxygen2">Ask Copilot to Document All R Functions Using Roxygen2</h3>
<p>If the output includes R functions, you must also request:</p>
<div class="callout callout-style-simple callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Prompt
</div>
</div>
<div class="callout-body-container callout-body">
<p>Add proper Roxygen2 documentation for all R functions. Include:</p>
<ul>
<li><code>@title</code></li>
<li><code>@description</code></li>
<li><code>@param</code></li>
<li><code>@return</code></li>
<li><code>@examples</code> (if useful)</li>
<li><code>@import</code> / <code>@importFrom</code> (only when truly necessary)</li>
</ul>
</div>
</div>
<p>This step ensures:</p>
<ul>
<li>The function interfaces are clear.</li>
<li>The expected inputs/outputs are known.</li>
<li>Reviewers can understand intent without reading the body.</li>
<li>Packages remain maintainable.</li>
</ul>
<p>We want <strong>professional-grade documentation</strong> from the start, not as an afterthought.</p>
<hr>
</section>
<section id="ask-copilot-to-provide-a-plain-language-overview-of-the-logic" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="ask-copilot-to-provide-a-plain-language-overview-of-the-logic">Ask Copilot to Provide a Plain-Language Overview of the Logic</h3>
<p>This is different from comments or Roxygen2 documentation.</p>
<p>You should ask:</p>
<div class="callout callout-style-simple callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Prompt
</div>
</div>
<div class="callout-body-container callout-body">
<p>Write a short, plain-language explanation of how this code works. Pretend you’re explaining it to a teammate seeing it for the first time.</p>
</div>
</div>
<p>This summary helps:</p>
<ul>
<li>New team members ramp up quickly.</li>
<li>Reviewers understand context without digging.</li>
<li>Future maintainers get immediate clarity.</li>
</ul>
<p>This explanation goes into the task summary (alongside the step-by-step explanation).</p>
<hr>
</section>
</section>
<section id="protocol-3-testing-and-edge-cases" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="protocol-3-testing-and-edge-cases">Protocol 3 — Testing and Edge Cases</h2>
<p><strong>Objective:</strong> No Copilot-generated code should be accepted without being tested against realistic and edge-case scenarios. This protocol ensures that Copilot helps you design and implement tests that actually exercise the code.</p>
<hr>
<section id="ask-copilot-to-build-a-validation-checklist" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="ask-copilot-to-build-a-validation-checklist">Ask Copilot to Build a Validation Checklist</h3>
<p>Before moving on, request:</p>
<div class="callout callout-style-simple callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Prompt
</div>
</div>
<div class="callout-body-container callout-body">
<p>Create a validation checklist for this code. Include:</p>
<ul>
<li>expected inputs and outputs</li>
<li>potential failure points</li>
<li>required dependencies</li>
<li>edge cases to test</li>
<li>assumptions this code relies on</li>
</ul>
</div>
</div>
<p>This checklist goes into your summary and becomes a quick-reference tool for reviewers.</p>
<hr>
</section>
<section id="ask-copilot-to-generate-unit-tests-and-edge-cases" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="ask-copilot-to-generate-unit-tests-and-edge-cases">Ask Copilot to Generate Unit Tests and Edge Cases</h3>
<p>No Copilot-generated code is considered “validated” until Copilot helps you test it.</p>
<p>For R:</p>
<div class="callout callout-style-simple callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Prompt
</div>
</div>
<div class="callout-body-container callout-body">
<p>Generate <code>testthat</code> unit tests for this code. Cover:</p>
<ul>
<li>normal cases</li>
<li>edge cases</li>
<li>wrong input types</li>
<li>missing values</li>
<li>extreme or unusual data scenarios</li>
</ul>
</div>
</div>
<p>For Stata:</p>
<div class="callout callout-style-simple callout-tip no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Prompt
</div>
</div>
<div class="callout-body-container callout-body">
<p>Generate Stata tests (do-file assertions or checks) for this code. Cover:</p>
<ul>
<li>realistic data</li>
<li>corner cases</li>
<li>unexpected inputs</li>
</ul>
</div>
</div>
<p>These tests must be included in your PR.</p>
<hr>
</section>
<section id="optional-but-recommended-ask-copilot-to-suggest-performance-sensitive-tests" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="optional-but-recommended-ask-copilot-to-suggest-performance-sensitive-tests">(Optional but Recommended) Ask Copilot to Suggest Performance-Sensitive Tests</h3>
<p>When working with large data or performance-critical code, you can also ask:</p>
<div class="callout callout-style-simple callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Prompt
</div>
</div>
<div class="callout-body-container callout-body">
<p>Suggest performance-sensitive tests for this code. Identify:</p>
<ul>
<li>operations that may be slow on large data</li>
<li>places where copies of large objects might be made</li>
<li>scenarios that stress memory usage</li>
</ul>
</div>
</div>
<p>This helps you spot performance issues early rather than discovering them in production.</p>
<hr>
</section>
</section>
<section id="protocol-4-dependencies-risks-and-final-validation-bundle" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="protocol-4-dependencies-risks-and-final-validation-bundle">Protocol 4 — Dependencies, Risks, and Final Validation Bundle</h2>
<p><strong>Objective:</strong> Before Copilot-assisted code reaches the repository, we want to be confident that it uses dependencies responsibly, avoids obvious risks, and has a complete “validation bundle” that reviewers can use to assess it quickly and fairly.</p>
<hr>
<section id="ask-copilot-to-run-a-dependency-and-risk-scan" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="ask-copilot-to-run-a-dependency-and-risk-scan">Ask Copilot to Run a Dependency and Risk Scan</h3>
<p>If the code adds or modifies dependencies, request:</p>
<div class="callout callout-style-simple callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Prompt
</div>
</div>
<div class="callout-body-container callout-body">
<p>Explain why each dependency is needed. Suggest ways to remove or replace unnecessary dependencies. Check for conflicts with <code>data.table</code>, <code>collapse</code>, or <code>rlang</code>. Identify any security or stability concerns (e.g., unsafe I/O, exposed paths, or risky patterns).</p>
</div>
</div>
<p>This helps prevent dependency creep and ensures the code fits our ecosystem and security expectations. Of course, this is only needed when you just started developing the code or when dependencies were changed.</p>
<hr>
</section>
<section id="ask-copilot-to-critique-its-own-code" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="ask-copilot-to-critique-its-own-code">Ask Copilot to Critique Its Own Code</h3>
<p>Believe it or not, this might be one of the most powerful steps.</p>
<p>Prompt Copilot with:</p>
<div class="callout callout-style-simple callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Prompt
</div>
</div>
<div class="callout-body-container callout-body">
<p>Review your own code as if you were performing a formal code review. Identify:</p>
<ul>
<li>inefficiencies</li>
<li>unnecessary complexity</li>
<li>risky assumptions</li>
<li>unclear logic</li>
<li>places where <code>data.table</code>, <code>collapse</code>, or <code>rlang</code> might be more appropriate</li>
<li>opportunities to simplify or remove over-engineered patterns</li>
</ul>
</div>
</div>
<p>Copilot is surprisingly good at pointing out its own flaws when prompted this way. Use its critique to improve the final version.</p>
<p>You can adapt the mention of <code>data.table</code>, <code>collapse</code>, and <code>rlang</code> to match the standards of your package or project. This are the ones that I (Andrés) use the most.</p>
<hr>
</section>
<section id="package-everything-into-a-validation-bundle" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="package-everything-into-a-validation-bundle">Package Everything Into a “Validation Bundle”</h3>
<p>Before closing your task, ask Copilot:</p>
<div class="callout callout-style-simple callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>Prompt
</div>
</div>
<div class="callout-body-container callout-body">
<p>Add all validation materials to the task summary, including:</p>
<ul>
<li>step-by-step explanation of the code</li>
<li>in-code comments added</li>
<li>Roxygen2 documentation (for R functions)</li>
<li>validation checklist</li>
<li>plain-language explanation</li>
<li>unit tests and edge cases</li>
<li>dependency and risk analysis</li>
<li>a brief summary of your self-critique and improvements made</li>
</ul>
</div>
</div>
<p>This bundle provides everything reviewers need. It also ensures that anyone who maintains the code later won’t be flying blind.</p>
<hr>
</section>
<section id="why-these-protocols-matter" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="why-these-protocols-matter">Why These Protocols Matter</h3>
<p>The goal isn’t to slow you down. It’s to make sure that Copilot helps you, without replacing your thinking or lowering our standards.</p>
<p>With these protocols:</p>
<ul>
<li>You don’t have to manually inspect every line in isolation.</li>
<li>You don’t have to fully understand the code immediately—but you always have the material to understand it.</li>
<li>You don’t have to memorize anything; explanations, comments, docs, and tests are all there.</li>
</ul>
<p>Copilot explains, documents, critiques, and tests. You stay in control, make the decisions, and remain the author of the code.</p>
<p>That’s the balance we’re aiming for.</p>
<hr>
</section>
<section id="extra-prompt-files-are-optional-tools-not-documentation" class="level3 unnumbered">
<h3 class="unnumbered anchored" data-anchor-id="extra-prompt-files-are-optional-tools-not-documentation">(EXTRA) Prompt Files Are Optional Tools, Not Documentation</h3>
<p>Copilot has something called <strong>Prompt Files</strong>, which lets you save reusable instructions like:</p>
<ul>
<li>“Use <code>data.table</code>, not <code>dplyr</code>.”</li>
<li>“Follow <code>collapse</code> idioms.”</li>
<li>“Write tests using <code>testthat</code>.”</li>
</ul>
<p>These are great for giving Copilot consistent context, but they <em>don’t</em> replace the documentation required above.</p>
<p>Use them if they help you, but they’re optional.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./VScode_setup_for_github.html" class="pagination-link" aria-label="SetUp Git &amp; GitHub in VS Code">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">SetUp Git &amp; GitHub in VS Code</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./copilot_guidelines.html" class="pagination-link" aria-label="Suggested Guidelines for Using GitHub Copilot in Technical Work">
        <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Suggested Guidelines for Using GitHub Copilot in Technical Work</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>